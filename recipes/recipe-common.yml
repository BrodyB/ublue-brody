# module configuration, executed in order
# you can include multiple instances of the same module
modules:
  # Copy files over destined for the /usr and /usr/etc directories
  - type: files
    files:
      - source: system
        destination: /

  - type: bling
    install:
      - dconf-update-service

  # Install OS-level software and remove some existing packages
  - type: rpm-ostree
    install:
      - code
      - gdb
      - git
      - git-lfs
      - xev # Utility for getting keycodes from input devices
      - fastfetch
      - sassc
      - hugo # Static site generator
      - p7zip
      - p7zip-plugins
      - xwaylandvideobridge # Needed to share screen on apps like Discord
      - libvirt # For Gnome Boxes communication with host OS
    remove:
      - gnome-shell-extension-launch-new-instance
      - gnome-shell-extension-places-menu
      - gnome-shell-extension-window-list
      - gnome-shell-extension-caffeine

  # Bundle all of these Flatpaks from Flathub
  - type: default-flatpaks
    notify: true # Send notification after install/uninstall is finished (true/false)
    system:
      install:
        # Internet!
        - io.gitlab.librewolf-community # Fork of Firefox with a nice customizable interface
        - org.gnome.Geary # Email client
        - com.discordapp.Discord
        - com.slack.Slack
        - io.gitlab.news_flash.NewsFlash # An RSS reader
        - com.belmoussaoui.Authenticator # Stores all your auth codes
        - com.bitwarden.desktop # Password manager

        # Media!
        - org.gnome.Podcasts
        - com.obsproject.Studio
        - fr.handbrake.ghb
        # Music player is Winamp 5 using Bottles ðŸ˜Ž

        # Productivity?
        - md.obsidian.Obsidian # Markdown editor and database
        - org.libreoffice.LibreOffice

        # Game Development!
        - org.blender.Blender
        - org.kde.krita
        - io.itch.itch
        - io.github.MakovWait.Godots

        # Utilities
        - com.usebottles.bottles # Run Windows applications
        - it.mijorus.gearlever # Install/Manage AppImages
        - it.mijorus.smile # Emoji picker
        - com.rafaelmardojai.Blanket # Plays ambient sounds, like rain, wind, water

      remove:
      - org.mozilla.Thunderbird
      - org.mozilla.firefox

  # Add these Gnome extentions
  - type: gnome-extensions
    install:
      - 36 # Lock Keys indicator
      - 307 # Dash-to-Dock
      - Quick Close in Overview
      - Tiling Shell
      - 6096 # Smile extension needed to enable auto-paste
      - Toggle Headphone
      - Vitals
      - 4470 # Media Controls
      - Click to close overview # click on empty space in Overview to close it
      - Weather or Not # Show a simple weather widget on the top panel
      - Quick Settings Audio Devices Hider
      - Quick Settings Audio Devices Renamer

  # Set default Gnome settings
  - type: gschema-overrides
    include:
      - zz1-common.gschema.override

  # This script is needed to make the 'files' module changes stick
  - type: script
    scripts:
      - initramfs.sh
